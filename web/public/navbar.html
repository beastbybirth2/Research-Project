<nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            
            Smart <span style="color: aqua;">Building</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page"
                        href="/add-device">Add Devices</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/me">About Me</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#"
                        id="navbarDropdown" role="button" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        Features
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="/floor-plan"><i class="fa-light fa-house"></i> Floorplan</a>
                        <a class="dropdown-item" href="/stats"><i class="fa-solid fa-chart-simple"></i> Statistics</a>
                        <a class="dropdown-item" href="/intrusion-logs"><i class="fa-solid fa-user-secret"></i> Intrusion Logs</a>
                        <a class="dropdown-item" href="/manage-known-faces"><i class="fas fa-users-cog"></i> Manage Faces</a> <!-- ADDED THIS LINE -->
                        <div class="dropdown-divider"></div>
                        
                        <a class="dropdown-item" target="_blank" href="http://localhost:5000/docs"><i class="fa-brands fa-dochub"></i> Docs</a>
                    </div>
                </li>

            </ul>



            <a href="/users/logout" id="logoutButton" class="btn
                btn-outline-danger"
                style="margin-right: 5%;"><i class="fa
                    fa-sign-out" aria-hidden="true"></i> <span id="loggout">Logout</span></a>
            <div>
                <input type="checkbox" class="checkbox" id="checkbox"
                    onClick="nightToggle()">
                <label for="checkbox" class="label">
                    <i class="fas fa-moon"></i>
                    <i class='fas fa-sun'></i>
                    <div class='ball'>
                    </label>
                </div>

            </div>
        </div>
    </nav>
    <link rel="stylesheet" href="/Resources/css/style.css">
    <script
    src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>    
        function nightToggle() {
        var element = document.body;
        element.dataset.bsTheme = element.dataset.bsTheme == "light" ? "dark" : "light";
        }
        document.addEventListener('DOMContentLoaded', () => {
  // Your JavaScript code goes here

        logoutext = document.getElementById("loggout");
        $(function() {
        fetch('/users/me')
  .then(res => {
    if (res.status === 401) {
      throw new Error('Not authenticated');
    }
    return res.json();
  })
  .then(user => {
    // Use user data
    
    logoutext.innerHTML = user[0].name;
  })
  .catch(err => {
      console.warn('User not authenticated or error fetching user data for navbar name.');
      // Keep "Logout" as default or handle as needed
  });
});
});
        </script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
        integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />